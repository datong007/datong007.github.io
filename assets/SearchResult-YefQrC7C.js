import{u as j,f as Ee,g as Be,h as I,i as se,P as te,j as le,k as ae,l as L,m as f,n as re,w as _,p as B,q as ue,R as P,s as oe,v as ie,x as ne,C as Ae,y as ce,z as pe,A as he,B as ve,D as me,E as de,F as ye,G as O,H as V,I as Me,J as R,K as De}from"./app-CHyXgOYU.js";const ge=["/","/posts/mission.html","/posts/%E8%81%94%E7%B3%BB%E6%88%91/%E6%AC%A2%E8%BF%8E%E7%99%BB%E8%88%B9.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-500.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-700.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-705.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-705A%20B.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-705C%20D.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-707.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-707A%20B.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-709.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-7091A%20B.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-7091C%20D.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/MB-900.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/VS-500.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/VS-700.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/VS-705.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/VS-707.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1/VS-900.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-280.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-320.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-X108.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-X109.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-X172.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-X432.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-X436.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-X609.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-X708.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-X808.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-ZD.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MB-ZWJ.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MBBT-100.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MBBT-104.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MBEH-45.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MBEH-60.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MBKZ-246.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MBXL-45.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%92%93%E7%AE%B1%E9%85%8D%E4%BB%B6/MBXL-60.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%A5%B5%E7%9B%92/MBA1.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%A5%B5%E7%9B%92/MBA2.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%A5%B5%E7%9B%92/MBA3.html","/posts/%E4%BA%A7%E5%93%81%E7%B1%BB%E5%9E%8B/%E9%A5%B5%E7%9B%92/MBA4.html","/404.html"],He="SEARCH_PRO_QUERY_HISTORY",m=j(He,[]),fe=()=>{const{queryHistoryCount:s}=R,t=s>0;return{enabled:t,queryHistory:m,addQueryHistory:l=>{t&&(m.value=Array.from(new Set([l,...m.value.slice(0,s-1)])))},removeQueryHistory:l=>{m.value=[...m.value.slice(0,l),...m.value.slice(l+1)]}}},X=s=>ge[s.id]+("anchor"in s?`#${s.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=R,d=j(Re,[]),ke=()=>{const s=$>0;return{enabled:s,resultHistory:d,addResultHistory:t=>{if(s){const l={link:X(t),display:t.display};"header"in t&&(l.header=t.header),d.value=[l,...d.value.slice(0,$-1)]}},removeResultHistory:t=>{d.value=[...d.value.slice(0,t),...d.value.slice(t+1)]}}},Se=s=>{const t=Ae(),l=I(),k=ce(),r=L(0),D=f(()=>r.value>0),p=pe([]);return he(()=>{const{search:h,terminate:S}=ve(),y=Me(i=>{const M=i.join(" "),{searchFilter:w=c=>c,splitWord:Q,suggestionsFilter:b,...v}=t.value;M?(r.value+=1,h(i.join(" "),l.value,v).then(c=>w(c,M,l.value,k.value)).then(c=>{r.value-=1,p.value=c}).catch(c=>{console.warn(c),r.value-=1,r.value||(p.value=[])})):p.value=[]},R.searchDelay-R.suggestDelay);_([s,l],([i])=>y(i),{immediate:!0}),me(()=>{S()})}),{isSearching:D,results:p}};var Qe=Ee({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:t}){const l=Be(),k=I(),r=se(te),{enabled:D,addQueryHistory:p,queryHistory:h,removeQueryHistory:S}=fe(),{enabled:y,resultHistory:i,addResultHistory:M,removeResultHistory:w}=ke(),Q=D||y,b=le(s,"queries"),{results:v,isSearching:c}=Se(b),a=ae({isQuery:!0,index:0}),n=L(0),A=L(0),F=f(()=>Q&&(h.value.length>0||i.value.length>0)),q=f(()=>v.value.length>0),x=f(()=>v.value[n.value]||null),U=()=>{const{isQuery:e,index:E}=a;E===0?(a.isQuery=!e,a.index=e?i.value.length-1:h.value.length-1):a.index=E-1},Y=()=>{const{isQuery:e,index:E}=a;E===(e?h.value.length-1:i.value.length-1)?(a.isQuery=!e,a.index=0):a.index=E+1},Z=()=>{n.value=n.value>0?n.value-1:v.value.length-1,A.value=x.value.contents.length-1},J=()=>{n.value=n.value<v.value.length-1?n.value+1:0,A.value=0},K=()=>{A.value<x.value.contents.length-1?A.value+=1:J()},z=()=>{A.value>0?A.value-=1:Z()},C=e=>e.map(E=>De(E)?E:B(E[0],E[1])),G=e=>{if(e.type==="customField"){const E=de[e.index]||"$content",[u,H=""]=ye(E)?E[k.value].split("$content"):E.split("$content");return e.display.map(o=>B("div",C([u,...o,H])))}return e.display.map(E=>B("div",C(E)))},g=()=>{n.value=0,A.value=0,t("updateQuery",""),t("close")},W=()=>D?B("ul",{class:"search-pro-result-list"},B("li",{class:"search-pro-result-list-item"},[B("div",{class:"search-pro-result-title"},r.value.queryHistory),h.value.map((e,E)=>B("div",{class:["search-pro-result-item",{active:a.isQuery&&a.index===E}],onClick:()=>{t("updateQuery",e)}},[B(O,{class:"search-pro-result-type"}),B("div",{class:"search-pro-result-content"},e),B("button",{class:"search-pro-remove-icon",innerHTML:V,onClick:u=>{u.preventDefault(),u.stopPropagation(),S(E)}})]))])):null,N=()=>y?B("ul",{class:"search-pro-result-list"},B("li",{class:"search-pro-result-list-item"},[B("div",{class:"search-pro-result-title"},r.value.resultHistory),i.value.map((e,E)=>B(P,{to:e.link,class:["search-pro-result-item",{active:!a.isQuery&&a.index===E}],onClick:()=>{g()}},()=>[B(O,{class:"search-pro-result-type"}),B("div",{class:"search-pro-result-content"},[e.header?B("div",{class:"content-header"},e.header):null,B("div",e.display.map(u=>C(u)).flat())]),B("button",{class:"search-pro-remove-icon",innerHTML:V,onClick:u=>{u.preventDefault(),u.stopPropagation(),w(E)}})]))])):null;return re("keydown",e=>{if(s.isFocusing){if(q.value){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const E=x.value.contents[A.value];p(s.queries.join(" ")),M(E),l.push(X(E)),g()}}else if(y){if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:E}=a;a.isQuery?(t("updateQuery",h.value[E]),e.preventDefault()):(l.push(i.value[E].link),g())}}}}),_([n,A],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>B("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!q.value:!F.value}],id:"search-pro-results"},s.queries.length?c.value?B(ue,{hint:r.value.searching}):q.value?B("ul",{class:"search-pro-result-list"},v.value.map(({title:e,contents:E},u)=>{const H=n.value===u;return B("li",{class:["search-pro-result-list-item",{active:H}]},[B("div",{class:"search-pro-result-title"},e||r.value.defaultTitle),E.map((o,ee)=>{const T=H&&A.value===ee;return B(P,{to:X(o),class:["search-pro-result-item",{active:T,"aria-selected":T}],onClick:()=>{p(s.queries.join(" ")),M(o),g()}},()=>[o.type==="text"?null:B(o.type==="title"?oe:o.type==="heading"?ie:ne,{class:"search-pro-result-type"}),B("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?B("div",{class:"content-header"},o.header):null,B("div",G(o))])])})])})):r.value.emptyResult:Q?F.value?[W(),N()]:r.value.emptyHistory:r.value.emptyResult)}});export{Qe as default};
